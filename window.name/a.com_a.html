    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
    <html xmlns="http://www.w3.org/1999/xhtml" >  
    <head>  
        <title>跨域获取数据</title>  
        <script type="text/javascript">  
        function domainData(url, fn)  
        {  
            var isFirst = true;  
            var iframe = document.createElement('iframe');  
            iframe.style.display = 'none';  
            var loadfn = function(){  
                if(isFirst){  
                    //contentDocument 属性能够以 HTML 对象来返回 iframe 中的文档。
                    //The contentWindow property returns the Window object generated by an iframe element (through the //window object, you can access the document object and then any one of the document's elements).
                   

                   //当修改iframe的url，保证当前同域可以读取已经被外域（http://192.168.21.133/data.html）赋值了的window.name的值
                    iframe.contentWindow.location = 'about:blank';  

                    console.log(iframe.contentWindow);
                    isFirst = false;  
                } else {  
                    fn(iframe.contentWindow.name);  
                    iframe.contentWindow.document.write('');  
                    iframe.contentWindow.close();  
                    //The removeChild() method removes a specified child node of the specified element.
                    //用来销毁，保证安全，否则其他的域会读取
                    document.body.removeChild(iframe);  

                    iframe.src = '';  
                    iframe = null;  
                }  
            };  
            iframe.src = url;  
            //此处判断iframe是否成功加载，参考资料：http://www.planabc.net/2009/09/22/iframe_onload/
            if(iframe.attachEvent){  
                iframe.attachEvent('onload', loadfn);  
            } else {  
                iframe.onload = loadfn;  
            }  
              
            document.body.appendChild(iframe);  
        }  
        </script>  
    </head>  
    <body>  
      
    </body>  
        <script type="text/javascript">  
        domainData('http://192.168.21.133/data.html', function(data){  
            alert(data);  
        });  
        </script>  
    </html>  